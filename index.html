<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Perfis TOTVS RM</title>
    <!-- Google Fonts - Open Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Cabeçalho -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-users-cog"></i>
                <h1>Gerenciador de Perfis TOTVS RM</h1>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Indicador de Etapas -->
        <div class="card mb-6">
            <div class="card-body">
                <div class="steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <span class="step-label">Selecionar Perfil</span>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <span class="step-label">Selecionar Menus</span>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <span class="step-label">Exportar Perfil</span>
                    </div>
                    <div class="step-line"></div>
                </div>
            </div>
        </div>

        <!-- Conteúdo das Etapas -->
        <div class="card">
            <!-- Etapa 1: Seleção de Perfil -->
            <div id="step1" class="step-content">
                <div class="card-header">
                    <h2 class="text-xl font-semibold">Selecione o Tipo de Perfil</h2>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                        <button class="profile-btn bg-blue-50 hover:bg-blue-100 border border-blue-100 text-blue-700 p-6 rounded-lg transition-all hover:shadow-md" data-profile="supervisor">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-user-tie text-3xl mb-3 text-blue-600"></i>
                                <h3 class="font-semibold text-lg">Supervisor</h3>
                                <p class="text-sm text-gray-600 mt-1">Acesso total ao sistema</p>
                            </div>
                        </button>
                        <button class="profile-btn bg-green-50 hover:bg-green-100 border border-green-100 text-green-700 p-6 rounded-lg transition-all hover:shadow-md" data-profile="analista">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-user-shield text-3xl mb-3 text-green-600"></i>
                                <h3 class="font-semibold text-lg">Analista</h3>
                                <p class="text-sm text-gray-600 mt-1">Acesso a módulos específicos</p>
                            </div>
                        </button>
                        <button class="profile-btn bg-yellow-50 hover:bg-yellow-100 border border-yellow-100 text-yellow-700 p-6 rounded-lg transition-all hover:shadow-md" data-profile="assistente">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-user-edit text-3xl mb-3 text-yellow-600"></i>
                                <h3 class="font-semibold text-lg">Assistente</h3>
                                <p class="text-sm text-gray-600 mt-1">Acesso limitado</p>
                            </div>
                        </button>
                        <button class="profile-btn bg-purple-50 hover:bg-purple-100 border border-purple-100 text-purple-700 p-6 rounded-lg transition-all hover:shadow-md" data-profile="estagiario">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-user-graduate text-3xl mb-3 text-purple-600"></i>
                                <h3 class="font-semibold text-lg">Estagiário</h3>
                                <p class="text-sm text-gray-600 mt-1">Acesso básico</p>
                            </div>
                        </button>
                    </div>
                    <div class="flex justify-end pt-4 border-t border-gray-100">
                        <button id="nextToStep2" class="btn btn-primary" disabled>
                            Próximo <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Etapa 2: Seleção de Menus -->
            <div id="step2" class="step-content hidden">
                <div class="card-header flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <h2 class="text-xl font-semibold">Selecione os Menus</h2>
                    <div class="flex flex-wrap gap-3">
                        <button id="selectAll" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-check-square mr-1"></i> Selecionar Tudo
                        </button>
                        <button id="deselectAll" class="btn btn-outline-primary btn-sm">
                            <i class="far fa-square mr-1"></i> Desmarcar Tudo
                        </button>
                        <button id="expandAll" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-expand mr-1"></i> Expandir Tudo
                        </button>
                        <button id="collapseAll" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-compress mr-1"></i> Recolher Tudo
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div id="menuTree" class="menu-tree">
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                            <p>Carregando menus...</p>
                        </div>
                    </div>
                    <div class="flex justify-between pt-4 border-t border-gray-100 mt-4">
                        <button id="backToStep1" class="btn btn-outline-primary">
                            <i class="fas fa-arrow-left mr-2"></i> Voltar
                        </button>
                        <button id="nextToStep3" class="btn btn-primary">
                            Próximo <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Etapa 3: Exportar Perfil -->
            <div id="step3" class="step-content hidden">
                <div class="card-header">
                    <h2 class="text-xl font-semibold">Exportar Perfil</h2>
                </div>
                <div class="card-body">
                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6 rounded">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-info-circle text-blue-500 text-xl mt-0.5"></i>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800">Informações do Perfil</h3>
                                <div class="mt-1 text-sm text-blue-700">
                                    <p>Revise as configurações do perfil e clique em <strong>Exportar Perfil</strong> para baixar o arquivo de configuração.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="profileName" class="block text-sm font-medium text-gray-700 mb-1">Nome do Perfil</label>
                                <input type="text" id="profileName" class="form-control" placeholder="Ex: Perfil Supervisor Vendas">
                                <p class="mt-1 text-sm text-gray-500" id="fileNamePreview">Arquivo: perfil_exportado.json</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de Perfil</label>
                                <div class="bg-gray-50 p-3 rounded border border-gray-200">
                                    <div class="flex items-center">
                                        <i id="profileIcon" class="fas fa-user-tie text-xl mr-3 text-blue-600"></i>
                                        <div>
                                            <p id="profileType" class="font-medium">Supervisor</p>
                                            <p id="profileDescription" class="text-sm text-gray-500">Acesso total ao sistema</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded border border-gray-200 mb-6">
                        <h4 class="text-sm font-medium text-gray-700 mb-3">Resumo das Permissões</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full bg-green-500 mr-2"></div>
                                <span class="text-sm text-gray-600">Módulos Selecionados: <span id="selectedModulesCount">0</span></span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full bg-blue-500 mr-2"></div>
                                <span class="text-sm text-gray-600">Menus Ativos: <span id="activeMenusCount">0</span></span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full bg-yellow-500 mr-2"></div>
                                <span class="text-sm text-gray-600">Data de Criação: <span id="creationDate">-</span></span>
                            </div>
                        </div>
                    </div>

                    <div class="flex justify-between pt-4 border-t border-gray-100">
                        <button id="backToStep2" class="btn btn-outline-primary">
                            <i class="fas fa-arrow-left mr-2"></i> Voltar
                        </button>
                        <button id="exportProfile" class="btn btn-success">
                            <i class="fas fa-file-export mr-2"></i> Exportar Perfil
                        </button>
                    </div>
                </div>
            </div>
                    <i class="fas fa-file-export mr-2"></i> Exportar JSON
                </button>
            </div>
        </div>
    </div>

    <!-- Notificação -->
    <div id="notification" class="fixed bottom-4 right-4 bg-green-500 text-white px-4 py-3 rounded-lg shadow-lg hidden transform transition-transform duration-300 translate-y-2 opacity-0 z-50 max-w-xs">
        <div class="flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            <span id="notificationMessage">Operação realizada com sucesso!</span>
        </div>
    </div>

    <!-- Carrega o arquivo de configuração primeiro -->
    <script src="js/config.js"></script>
    <!-- Depois carrega o app principal -->
    <script src="js/app.js"></script>
</body>
</html>